trigger:
- main

pool:
  vmImage: windows-latest

jobs:
- deployment: DeployToMAG9050
  displayName: Deploy to Deployment Group MAG9050
  environment: 'MAG9050'  # Specify the environment name if needed
  strategy:
    runOnce:
      deploy:
        steps:
        - task: NodeTool@0
          inputs:
            versionSpec: '14.x'
          displayName: 'Install Node.js'

        - script: |
            npm install
            npm run build
          displayName: 'npm install and build'

        - task: PublishBuildArtifacts@1
          inputs:
            PathtoPublish: '$(System.DefaultWorkingDirectory)/build'  # Path to your build output
            ArtifactName: 'MyAppArtifact'

        - task: IISWebAppDeploymentOnMachineGroup@0
          inputs:
            WebSiteName: 'Default Web Site'  # Replace with your actual IIS website name
            Package: '$(System.DefaultWorkingDirectory)/build/MyAppArtifact.zip'  # Replace with the actual path to your built artifact
            DeploymentGroupName: 'MAG9050'  # Specify your deployment group name
